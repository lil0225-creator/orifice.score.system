:root {
  --neon:#00e5ff;
  --green:#00e676;
  --red:#ff1744;
  --blue:#2979ff;
  --panel:rgba(20,30,40,0.85);
  --bg1:#0f2027;
  --bg2:#203a43;
  --bg3:#2c5364;
}

*{ box-sizing:border-box; }
html { font-size:110%; }

body{
  margin:0; padding:20px; color:#e0f7fa; text-align:center;
  background: url("background.png") no-repeat center center fixed,
              radial-gradient(circle at center,var(--bg1),var(--bg2),var(--bg3));
  background-size:contain;
  font-family:"Segoe UI", Meiryo, sans-serif;
  font-size:inherit;
}

h1{
  margin:0 0 18px;
  font-size:32px;
  text-shadow:0 0 10px var(--neon);
}

/* 共通パネル枠 */
.panel{
  background:var(--panel);
  border:2px solid var(--neon);
  border-radius:14px;
  padding:20px;
  margin:14px auto 20px;
  width:95%;
  max-width:100%;
  box-shadow:0 0 14px #00e5ff55;
}

input,button{
  margin:4px; padding:7px 10px;
  border-radius:8px; border:1px solid var(--neon);
  background:#0f2027; color:#e0f7fa; font-size:14px;
}

.btn{ cursor:pointer; }
.add-btn{ background:#00bcd4; color:#fff; }
.reset-btn{ background:#ff5722; color:#fff; }
.del-btn{ background:#e53935; color:#fff; }

button.plus-m{ background:#e53935; color:#fff; }
button.minus-m{ background:#ffcdd2; color:#000; }
button.plus-b{ background:#2196f3; color:#fff; }
button.minus-b{ background:#bbdefb; color:#000; }

.option-label{
  background:rgba(255,255,255,0.08);
  border-radius:6px;
  padding:4px 8px;
  margin-left:6px;
  font-size:13px;
  opacity:0.8;
}
.option-label input{ margin-right:4px; }

/* 上部ルール入力の数値を大きめに */
.rule-input {
  font-size: 22px;
  font-weight: bold;
  width: 70px;
  text-align: center;
  border: 2px solid var(--neon);
  border-radius: 8px;
  background: #0f2027;
  color: #e0f7fa;
}

/* 個人カード */
.cards{
  display:flex; flex-wrap:wrap; justify-content:center;
  gap:18px; margin-top:10px;
}
.card{
  flex: 1 1 270px;
  max-width: 350px;
  min-height: 155px;
  padding: 20px;
  background:rgba(15,32,47,0.92);
  border:1px solid var(--neon);
  border-radius:14px;
  padding:14px;
  box-shadow:0 0 12px #00e5ff55;
  position:relative;
}
.card[draggable="true"]{ cursor:grab; }
.card.dragging{
  opacity:0.5; transform:scale(1.05);
  transition:transform 0.2s ease, opacity 0.2s ease;
}

.name{
  margin:0; font-size:30px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.scores {
  font-size: 32px;
  font-weight: 800;
  margin: 1px 0;
}
.maru{ color:var(--red); }
.batsu{ color:var(--blue); }

/* 到達時アニメーション */
.win-animate {
  animation: winFlash 1.2s ease;
}
@keyframes winFlash {
  0%   { transform: scale(1);   box-shadow:0 0 6px var(--green); }
  50%  { transform: scale(1.15);box-shadow:0 0 40px var(--green); }
  100% { transform: scale(1);   box-shadow:0 0 12px var(--green); }
}

.lose-animate {
  animation: loseFlash 0.8s ease;
}
@keyframes loseFlash {
  0%   { transform: scale(1);   box-shadow:0 0 12px var(--red); }
  40%  { transform: scale(1.05);box-shadow:0 0 40px var(--red); }
  100% { transform: scale(1);   box-shadow:0 0 12px var(--red); }
}

.badge{
  position:absolute; top:6px; right:6px;
  font-size:12px; font-weight:700;
  padding:3px 6px; border-radius:8px;
}
.win{ background:var(--green); color:#001; animation:glow 1s infinite alternate; }
.lose{ background:var(--red); color:#fff; }

.limit-inline{
  display:inline-block; margin-left:6px; padding:2px 5px;
  font-size:12px; font-weight:700; border-radius:6px;
  background:#ffa726; color:#000; animation:blink 1s infinite;
}

@keyframes glow{ from{box-shadow:0 0 6px var(--green)} to{box-shadow:0 0 18px var(--green)} }
@keyframes blink{ 0%,50%,100%{opacity:1} 25%,75%{opacity:.3} }

/* チーム表示 */
.team-container{
  display:flex; flex-wrap:wrap; justify-content:center;
  gap:30px; margin-top:20px;
}
.team-box{
  flex:0 1 30%; min-width:380px; max-width:500px;
  background:var(--panel);
  border:1px solid var(--neon); border-radius:12px;
  padding:12px; box-shadow:0 0 12px #00e5ff55;
}
.team-box.drag-over{ background-color:rgba(0,128,255,0.2); }

.team-header{
  display:flex; justify-content:space-between; align-items:center;
  padding:8px; border:1px solid var(--neon);
  border-radius:10px;
  background:linear-gradient(90deg,var(--bg1),var(--bg2),var(--bg3));
  color:var(--neon); font-weight:700;
}
.team-header span:last-child{ font-size:20px; font-weight:800; }
.team-win{ color:var(--green); text-shadow:0 0 10px var(--green); }

table{
  border-collapse:collapse; width:100%; margin-top:8px;
}
th,td{
  border:1px solid var(--neon);
  padding:6px 8px;
  background:rgba(15,32,47,0.85);
  font-size:16px; text-align:center;
}
th{ background:rgba(0,229,255,0.2); color:var(--neon); }
tr[draggable="true"]{ cursor:grab; }
td .btn{ display:inline-block; white-space:nowrap; margin:2px; }
td{ white-space:nowrap; }

/* サイコロ */
.dice-buttons{
  display:flex; justify-content:center; gap:16px; margin-top:8px;
}
.die{
  width:90px; height:90px;
  border:2px solid var(--neon); border-radius:12px;
  background:#0f2027; color:#e0f7fa;
  font-weight:800; font-size:18px; cursor:pointer;
  transition:transform 0.5s ease; box-shadow:0 0 12px var(--neon);
}
.die.shake{ transform:rotate(540deg) scale(1.12); }
.dice-results{
  display:flex; justify-content:center; gap:16px; margin-top:8px;
}
.dice-box{
  min-width:84px; padding:6px; border:1px solid var(--neon);
  border-radius:8px; background:rgba(15,32,47,0.7);
  font-size:28px; font-weight:800; color:var(--neon);
  text-shadow:0 0 10px var(--neon);
}

/* 上部入力行 */
.row{
  display:flex; flex-wrap:wrap; align-items:center; gap:10px;
  justify-content:center; font-size:20px; font-weight:bold;
  color:#00e5ff; padding:8px;
}
.row input[type="number"]{
  width:60px; text-align:center; font-size:18px;
  border:2px solid #00e5ff; border-radius:8px;
}
.row label{
  margin-left:8px; font-size:16px; color:#00e5ff;
}

/* ユーティリティ */
.hidden{ display:none !important; }

#diceWrap {
  display: none;
  position: absolute;
  top: 10px;
  right: 10px;
}

/* 勝ち抜け状態のカード（放射状グラデーション＋光の筋） */
.card.win-state, tr.win-state {
  background: radial-gradient(circle at center,
    rgba(0,230,118,0.25),
    rgba(46,125,50,0.85),
    #1e3c1e
  );
  border: 2px solid var(--green);
  box-shadow: 0 0 25px var(--green), 0 0 60px rgba(0,230,118,0.6);
  color: #e8f5e9;
  position: relative;
  overflow: hidden;
}
.card.win-state::after, tr.win-state::after {
  content: "";
  position: absolute;
  top:0; left:-50%; width:200%; height:100%;
  background: linear-gradient(120deg, transparent 0%, rgba(0,230,118,0.4) 50%, transparent 100%);
  animation: shineMove 3s linear infinite;
}
@keyframes shineMove {
  0%   { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* 失格状態のカード（警告ライン模様） */
.card.lose-state, tr.lose-state {
  background: repeating-linear-gradient(
    -45deg,
    #3c1e1e,
    #3c1e1e 10px,
    #7f1d1d 10px,
    #7f1d1d 20px
  );
  border: 2px solid var(--red);
  box-shadow: 0 0 20px var(--red);
  color: #ffebee;
}

/* チームが勝利したときの枠デザイン */
.team-box.team-win-state {
  border: 2px solid var(--green);
  box-shadow: 0 0 25px var(--green), 0 0 60px rgba(0,230,118,0.6);
  background: linear-gradient(135deg, #1b3d1b, #2e7d32, #00e67633);
}
.team-win-animate {
  animation: teamWinFlash 1.5s ease;
}
@keyframes teamWinFlash {
  0%   { transform: scale(1);   box-shadow:0 0 10px var(--green); }
  50%  { transform: scale(1.05);box-shadow:0 0 50px var(--green); }
  100% { transform: scale(1);   box-shadow:0 0 25px var(--green); }
}

/* 勝ち抜けカットイン */
.cutin {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.8);
  padding: 30px 60px;
  background: rgba(0, 229, 255, 0.15);
  border: 3px solid var(--neon);
  border-radius: 20px;
  font-size: 64px;
  font-weight: 900;
  color: var(--neon);
  /* ✅ メタリック調（シルバー縁）＋ネオングロー */
  text-shadow:
    -2px -2px 0 #ccc,
     2px -2px 0 #ccc,
    -2px  2px 0 #ccc,
     2px  2px 0 #ccc,
    -2px  0px 0 #ccc,
     2px  0px 0 #ccc,
     0px -2px 0 #ccc,
     0px  2px 0 #ccc,
     0 0 12px var(--green),
     0 0 24px var(--neon);
  letter-spacing: 4px;
  z-index: 9999;
  opacity: 0;
  pointer-events: none;
}




.cutin.show {
  animation: cutinFlash 2s ease forwards;
}

@keyframes cutinFlash {
  0%   { opacity: 0; transform: translate(-50%, -50%) scale(0.6) rotate(-10deg); }
  15%  { opacity: 1; transform: translate(-50%, -50%) scale(1.1) rotate(0deg); }
  70%  { opacity: 1; transform: translate(-50%, -50%) scale(1.0); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(1.2); }
}

/* 失格カットイン */
.cutin-lose {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.8);
  padding: 30px 60px;
  background: rgba(255, 23, 68, 0.15);
  border: 3px solid var(--red);
  border-radius: 20px;
  font-size: 64px;
  font-weight: 900;
  color: var(--red);
  /* ✅ メタリック調（ガンメタ縁）＋ネオングロー */
  text-shadow:
    -2px -2px 0 #666,
     2px -2px 0 #666,
    -2px  2px 0 #666,
     2px  2px 0 #666,
    -2px  0px 0 #666,
     2px  0px 0 #666,
     0px -2px 0 #666,
     0px  2px 0 #666,
     0 0 12px var(--red),
     0 0 24px var(--red);
  letter-spacing: 4px;
  z-index: 9999;
  opacity: 0;
  pointer-events: none;
}




.cutin-lose.show {
  animation: cutinLoseFlash 2s ease forwards;
}

@keyframes cutinLoseFlash {
  0%   { opacity: 0; transform: translate(-50%, -50%) scale(0.6) rotate(10deg); }
  15%  { opacity: 1; transform: translate(-50%, -50%) scale(1.1) rotate(0deg); }
  70%  { opacity: 1; transform: translate(-50%, -50%) scale(1.0); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(1.2); }
}


